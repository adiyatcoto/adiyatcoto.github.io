<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- [MODIFIED] Mengubah initial-scale ke 0.8 untuk zoom out di mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <title data-en="The COP TAH Formula: A Revolutionary Pivot System" data-id="Formula COP TAH: Sistem Pivot Revolusioner">The COP TAH Formula: A Revolutionary Pivot System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* General Styling and Animations */
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-primary-bg);
            color: var(--color-text-primary);
            background: linear-gradient(-45deg, var(--gradient-bg-start), var(--gradient-bg-mid1), var(--gradient-bg-mid2), var(--gradient-bg-end));
            background-size: 400% 400%;
            animation: gradient-animation 25s ease infinite;
            transition: background-color 0.3s ease, color 0.3s ease;
            position: relative;
            overflow-x: hidden;
        }

        /* [MODIFIED] Hanya menggunakan Dark mode sebagai tema default */
        :root {
            --color-primary-bg: #0D1117;
            --color-secondary-bg: rgba(22, 27, 34, 0.8);
            --color-card-bg-transparent: rgba(22, 27, 34, 0.5);
            --color-formula-bg-transparent: rgba(13, 17, 23, 0.5);
            --color-chart-bg-transparent: rgba(13, 17, 23, 0.7);
            --color-text-primary: #C9D1D9;
            --color-text-secondary: #8B949E;
            --color-border: rgba(48, 54, 61, 0.6);
            --color-accent: #00A8E8;
            --color-accent-hover: #00BFFF;
            --color-button-inactive-bg: rgba(31, 41, 55, 0.5);
            --color-button-inactive-text: #9ca3af;
            --color-level-r: #EF4444;
            --color-level-s: #22C55E;
            --color-level-pp: #F59E0B;
            --color-curr-open-line: #00ffff;
            --color-curr-open-label-bg: rgba(13, 17, 23, 0.8);
            --color-curr-open-label-text: #00ffff;
            --color-prev-day: #9ca3af;
            --color-input-bg: #0F131A;
            --color-input-border: #30363d;
            --color-input-text: #C9D1D9;
            --color-svg-text-default: #8B949E;
            --color-svg-line-default: #8B949E;
            --color-svg-label-r: #EF4444;
            --color-svg-label-s: #22C55E;
            --color-svg-label-pp: #00ffff;
            --color-svg-line-r: #EF4444;
            --color-svg-line-s: #22C55E;
            --color-svg-line-pp: #00ffff;
            --gradient-bg-start: #0a0a0f;
            --gradient-bg-mid1: #0d1117;
            --gradient-bg-mid2: #1a202c;
            --gradient-bg-end: #0d1117;
            --hero-title-gradient: linear-gradient(135deg, #4F46E5 0%, #7C3AED 25%, #EC4899 50%, #F59E0B 75%, #10B981 100%);
            --title-gradient: linear-gradient(135deg, #4F46E5 0%, #7C3AED 25%, #EC4899 50%, #F59E0B 75%, #10B981 100%);
            --card-title-gradient: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            --highlight-formula-bg: rgba(0, 255, 255, 0.3);
            --highlight-formula-shadow: rgba(0, 255, 255, 0.6);
            --highlight-formula-text: #C9D1D9;
            --flare-color-1: rgba(139, 92, 246, 0.4);
            --flare-color-2: rgba(59, 130, 246, 0.4);
            --flare-color-3: rgba(16, 185, 129, 0.4);
            --flare-color-4: rgba(239, 68, 68, 0.4);
            --flare-color-5: rgba(245, 158, 11, 0.4);
        }

        /* Header & Navigation */
        .main-header {
            background: var(--color-secondary-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        .header-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            color: var(--color-text-primary);
            text-decoration: none;
            font-size: 1.1rem;
        }
        .header-logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #3B82F6, #6366F1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .back-to-portfolio {
            color: var(--color-text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .back-to-portfolio:hover {
            color: var(--color-accent);
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        /* [NEW] Language Toggle Switch */
        .language-toggle {
            position: relative;
            display: flex;
            align-items: center;
            background-color: var(--color-input-bg);
            border-radius: 9999px;
            padding: 4px;
            cursor: pointer;
            border: 1px solid var(--color-input-border);
            width: 70px;
            height: 36px;
            -webkit-tap-highlight-color: transparent; /* Mencegah highlight biru saat di-tap di mobile */
        }

        .language-toggle .toggle-switch {
            position: absolute;
            height: calc(100% - 8px);
            width: calc(50% - 4px);
            background-color: var(--color-accent);
            border-radius: 9999px;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            top: 4px;
            left: 4px;
        }

        .language-toggle.lang-en .toggle-switch {
            transform: translateX(100%);
        }

        .language-toggle .lang-text {
            flex: 1;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 1;
            transition: color 0.3s ease;
            color: var(--color-text-secondary);
            user-select: none; /* Mencegah teks terseleksi */
        }

        .language-toggle.lang-id .lang-id,
        .language-toggle.lang-en .lang-en {
            color: white;
        }

        /* Mobile menu toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--color-text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }
        .mobile-menu {
            position: fixed;
            top: -100%;
            left: 0;
            width: 100%;
            max-width: none;
            height: auto;
            background: var(--color-secondary-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: none;
            border-bottom: 1px solid var(--color-border);
            padding: 6rem 2rem 2rem;
            transition: top 0.3s ease;
            z-index: 999;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            display: none;
        }
        .mobile-menu.active {
            top: 0;
            display: block;
        }
        .mobile-menu-links { list-style: none; padding: 0; }
        .mobile-menu-links li { margin-bottom: 2.5rem; }
        .mobile-menu-links a {
            text-decoration: none;
            font-size: 1.8rem;
            font-weight: 600;
            transition: color 0.3s ease;
            display: block;
            padding: 0.5rem 0;
            color: var(--color-text-primary);
        }
        .mobile-menu-links a:hover {
            color: var(--color-accent);
            transform: translateX(10px);
        }
        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 998;
        }
        .mobile-menu-overlay.active { opacity: 1; visibility: visible; }

        /* [SIMPLIFIED] Glassmorphism Card Style for Dark Mode */
        .glass-card {
            background: var(--color-card-bg-transparent);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1rem;
            border: 1px solid var(--color-border);
            position: relative;
            padding: 2.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 0 5px rgba(139, 92, 246, 0.2), 0 0 10px rgba(59, 130, 246, 0.1);
        }
        .glass-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.4), 0 0 20px rgba(59, 130, 246, 0.2), 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        .glass-card.top-level {
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Typography */
        h1, h2, h3 { font-family: 'Inter', sans-serif; line-height: 1; color: var(--color-text-primary); }
        h1 { font-size: 3.75rem; font-weight: 800; }
        h2 { font-size: 2.5rem; line-height: 2.5rem; font-weight: 800; }
        h3 { font-size: 1.25rem; line-height: 1.75rem; font-weight: 700; }
        p { line-height: 1.75; color: var(--color-text-secondary); font-weight: 400; }

        .hero-title {
            font-size: 5rem;
            font-weight: 300;
            background: var(--hero-title-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradientMove 4s ease-in-out infinite;
        }
        @keyframes gradientMove {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .hero-subtitle { color: var(--color-accent); font-size: 1.5rem; font-weight: 500; }
        .hero-author { color: var(--color-text-secondary); font-size: 1.1rem; font-weight: 400; }
        .section-title {
            background: var(--title-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradientMove 3s ease-in-out infinite;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            font-size: 2.25rem;
            font-weight: 700;
        }
        .section-title i { display: none; }
        .glass-card h3 {
            background: var(--card-title-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradientMove 3s ease-in-out infinite;
            display: inline-block;
        }

        /* Formula Box and Highlighting */
        .formula-box {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-formula-bg-transparent);
            color: var(--color-formula-text);
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--color-border);
            overflow-x: auto;
            white-space: nowrap;
            text-align: center;
            margin-left: auto;
            margin-right: auto;
            display: block;
        }
        .formula-box .highlight-formula {
            background-color: var(--highlight-formula-bg);
            box-shadow: 0 0 15px var(--highlight-formula-shadow);
            border-radius: 4px;
            padding: 2px 6px;
            transition: all 0.3s ease-in-out;
            color: var(--highlight-formula-text);
        }
        
        /* Buttons and Interactive Elements */
        .btn { padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; border: 1px solid transparent; }
        .btn-active { background: linear-gradient(90deg, #3B82F6, var(--color-accent)); color: white; box-shadow: 0 0 15px rgba(59, 130, 246, 0.3); }
        .btn-active:hover { transform: translateY(-2px); box-shadow: 0 0 25px var(--color-accent-hover); }
        .btn-inactive { background-color: var(--color-button-inactive-bg); color: var(--color-button-inactive-text); }
        .btn-inactive:hover { background-color: var(--color-border); color: var(--color-text-primary); }
        .highlight { color: var(--color-accent); font-weight: 600; }
        
        /* Chart and Visualization Styles */
        .chart-container {
            position: relative;
            width: 100%;
            height: 500px;
            background-color: var(--color-chart-bg-transparent);
            border-radius: 0.5rem;
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid var(--color-border);
            overflow: hidden;
        }
        .pivot-line { position: absolute; height: 1px; transform-origin: left; transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
        .pivot-label-box { position: absolute; font-size: 11px; padding: 2px 5px; border-radius: 4px; transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); color: #ffffff; font-weight: 500; z-index: 10; }
        .distance-bar { transition: all 0.5s ease-in-out; border-radius: 2px; }
        
        /* Input Slider Styling */
        input[type=range] { -webkit-appearance: none; appearance: none; width: 100%; height: 4px; background: var(--color-accent); border-radius: 5px; outline: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; background: var(--color-accent); cursor: pointer; border-radius: 50%; border: 2px solid var(--color-primary-bg); box-shadow: 0 0 10px var(--color-accent); }
        input[type=range]::-moz-range-thumb { width: 18px; height: 18px; background: var(--color-accent); cursor: pointer; border-radius: 50%; border: 2px solid var(--color-primary-bg); box-shadow: 0 0 10px var(--color-accent); }

        /* Tab Styles */
        .tab-button.active { background: linear-gradient(90deg, #3B82F6, var(--color-accent)); color: white; box-shadow: 0 0 15px rgba(0, 168, 232, 0.3); }
        .tab-button.inactive { background-color: var(--color-button-inactive-bg); color: var(--color-button-inactive-text); }
        .tab-button.inactive:hover { background-color: var(--color-border); color: var(--color-text-primary); }
        .tab-content { display: none; padding: 1.5rem; background-color: var(--color-formula-bg-transparent); border-radius: 0.5rem; margin-top: -1px; border: 1px solid var(--color-border); }
        .tab-content.active { display: block; }

        /* Explanation Box Styles */
        .explanation-box { transition: all 0.5s ease-in-out; max-height: 0; overflow: hidden; opacity: 0; }
        .explanation-box.show { max-height: 500px; opacity: 1; margin-top: 1.5rem; background-color: var(--color-formula-bg-transparent); border-color: var(--color-border); }
        .explanation-box.show.border-cyan-500\/30 { border-color: var(--color-accent); }

        /* Navigation Bar Styles */
        .nav-link { color: var(--color-text-secondary); font-weight: 600; transition: color 0.3s ease, border-bottom-color 0.3s ease; padding-bottom: 8px; border-bottom: 2px solid transparent; }
        .nav-link:hover { color: var(--color-text-primary); }
        .nav-link.active { color: var(--color-accent); border-bottom-color: var(--color-accent); }

        /* Download Section Buttons */
        .btn-download-primary { background: var(--color-accent); color: white; padding: 1rem 2rem; border: none; border-radius: 50px; text-decoration: none; font-weight: 600; font-size: 1rem; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }
        .btn-download-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px var(--color-accent-hover); }
        .btn-download-secondary { color: var(--color-accent); text-decoration: none; padding: 1rem 2rem; border-radius: 50px; font-weight: 600; font-size: 1rem; transition: all 0.3s ease; background: transparent; border: 2px solid var(--color-accent); }
        .btn-download-secondary:hover { background: var(--color-accent); color: white; transform: translateY(-2px); }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            h1 { font-size: 3rem; }
            h2 { font-size: 1.75rem; }
            h3 { font-size: 1rem; }
            .hero-title { font-size: 3rem; }
            .hero-subtitle { font-size: 1.25rem; }
        }

        @media (max-width: 768px) {
            .header-container { padding: 0 1rem; }
            .back-to-portfolio .text-content { display: none; } /* Hide text on small screens, keep icon */
            .mobile-menu-toggle { display: flex; }
            .main-nav-links { display: none; }
            .hero-title { font-size: 2.5rem; }
            .hero-subtitle { font-size: 1rem; }
            .glass-card { padding: 1.5rem; }
            .grid.md\:grid-cols-2, .grid.md\:grid-cols-3 { grid-template-columns: 1fr; }
            .flex.justify-center.md\:justify-start { justify-content: center; }
            .chart-container { height: 300px; }
            .pivot-label-box { font-size: 10px; padding: 1px 3px; }
            .formula-box { font-size: 0.9rem; }
            .btn { padding: 0.6rem 1.2rem; font-size: 0.9rem; }
        }

        @media (min-width: 769px) {
            .mobile-menu-toggle { display: none; }
            .mobile-menu { display: none !important; }
        }

        /* Reduce motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {
            body, .main-header, .btn, .tab-button, .glass-card,
            .formula-box .highlight-formula, .pivot-line, .pivot-label-box, .distance-bar,
            input[type=range]::-webkit-slider-thumb, input[type=range]::-moz-range-thumb,
            .explanation-box, .nav-link, .btn-download-primary, .btn-download-secondary, .language-toggle .toggle-switch {
                animation: none !important;
                transition: none !important;
            }
        }

        /* Dynamic Flare Background Styles */
        .flare-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; pointer-events: none; }
        .flare-item { position: absolute; width: 300px; height: 300px; border-radius: 50%; opacity: 0; filter: blur(50px); animation-iteration-count: infinite; animation-timing-function: ease-in-out; background: radial-gradient(circle at center, var(--flare-color-center) 0%, var(--flare-color-edge) 70%, transparent 100%); }
        @keyframes flare-sweep-glow { 0% { transform: translate(-50vw, -50vh) scale(0.5) rotate(0deg); opacity: 0; } 10% { opacity: 0.6; } 50% { transform: translate(70vw, -20vh) scale(1.2) rotate(180deg); opacity: 0.8; } 90% { opacity: 0.3; } 100% { transform: translate(120vw, 120vh) scale(0.5) rotate(360deg); opacity: 0; } }
        .flare-item:nth-child(1) { background: radial-gradient(circle at center, var(--flare-color-1) 0%, transparent 70%); animation: flare-sweep-glow 20s infinite alternate; left: 10%; top: 20%; }
        .flare-item:nth-child(2) { background: radial-gradient(circle at center, var(--flare-color-2) 0%, transparent 70%); animation: flare-sweep-glow 25s infinite alternate; left: 80%; top: 50%; animation-delay: 5s; }
        .flare-item:nth-child(3) { background: radial-gradient(circle at center, var(--flare-color-3) 0%, transparent 70%); animation: flare-sweep-glow 18s infinite alternate; left: 30%; top: 70%; animation-delay: 10s; }
        .flare-item:nth-child(4) { background: radial-gradient(circle at center, var(--flare-color-4) 0%, transparent 70%); animation: flare-sweep-glow 22s infinite alternate; left: 60%; top: 10%; animation-delay: 2s; }
        .flare-item:nth-child(5) { background: radial-gradient(circle at center, var(--flare-color-5) 0%, transparent 70%); animation: flare-sweep-glow 28s infinite alternate; left: 0%; top: 90%; animation-delay: 7s; }

        /* SVG styles */
        .glass-card svg text { fill: var(--color-svg-text-default); }
        .glass-card svg line { stroke: var(--color-svg-line-default); }
        .glass-card svg .stroke-red-400 { stroke: var(--color-svg-line-r); }
        .glass-card svg .fill-red-400 { fill: var(--color-svg-label-r); }
        .glass-card svg .stroke-green-400 { stroke: var(--color-svg-line-s); }
        .glass-card svg .fill-green-400 { fill: var(--color-svg-label-s); }
        .glass-card svg .stroke-blue-400 { stroke: var(--color-svg-line-pp); }
        .glass-card svg .fill-blue-400 { fill: var(--color-svg-label-pp); }
        .svg-label-id { font-size: 0.6rem; }
        .svg-label-en { font-size: 0.75rem; }
    </style>
</head>
<body class="antialiased">

    <div class="flare-background"></div>

    <header class="main-header">
        <div class="header-container">
            <!-- [MODIFIED] Memastikan panah selalu terlihat -->
            <a href="/index.html#projects" class="header-logo">
                <div class="header-logo-icon">AC</div>
                <span class="back-to-portfolio" data-en="Back to Portfolio" data-id="Kembali ke Portofolio">
                    <i data-lucide="arrow-left" class="w-5 h-5"></i> 
                    <span class="text-content">Back to Portfolio</span>
                </span>
            </a>
            <nav class="main-nav-links hidden md:flex space-x-6 md:space-x-10">
                <a href="#abstract" class="nav-link" data-en="Abstract" data-id="Abstrak">Abstract</a>
                <a href="#problem" class="nav-link" data-en="The Problem" data-id="Masalah">The Problem</a>
                <a href="#solution" class="nav-link" data-en="The Solution" data-id="Solusi">The Solution</a>
                <a href="#visualizer" class="nav-link" data-en="Visualizer" data-id="Visualisator">Visualizer</a>
                <a href="#principles" class="nav-link" data-en="Principles" data-id="Prinsip">Principles</a>
                <a href="#download-whitepaper" class="nav-link" data-en="Download Whitepaper" data-id="Unduh Whitepaper">Download Whitepaper</a>
            </nav>
            <div class="header-right">
                <!-- [MODIFIED] Language Toggle Button diubah menjadi switch -->
                <div id="language-toggle" class="language-toggle">
                    <div class="toggle-switch"></div>
                    <span class="lang-text lang-id">ID</span>
                    <span class="lang-text lang-en">EN</span>
                </div>
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Open mobile menu" aria-expanded="false"><i data-lucide="menu"></i></button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay" onclick="closeMobileMenu()"></div>
    <div class="mobile-menu">
        <ul class="mobile-menu-links">
            <li><a href="#abstract" onclick="closeMobileMenu()" data-en="Abstract" data-id="Abstrak">Abstract</a></li>
            <li><a href="#problem" onclick="closeMobileMenu()" data-en="The Problem" data-id="Masalah">The Problem</a></li>
            <li><a href="#solution" onclick="closeMobileMenu()" data-en="The Solution" data-id="Solusi">The Solution</a></li>
            <li><a href="#visualizer" onclick="closeMobileMenu()" data-en="Visualizer" data-id="Visualisator">Visualizer</a></li>
            <li><a href="#principles" onclick="closeMobileMenu()" data-en="Principles" data-id="Prinsip">Principles</a></li>
            <li><a href="#download-whitepaper" onclick="closeMobileMenu()" data-en="Download Whitepaper" data-id="Unduh Whitepaper">Download Whitepaper</a></li>
        </ul>
    </div>

    <main class="container mx-auto px-4 md:px-8 py-8 space-y-12">

        <!-- Hero Section -->
        <section class="py-24 px-4 md:px-8 text-center">
            <h1 class="hero-title tracking-tight" data-en="The COP TAH Formula" data-id="Formula COP TAH">The COP TAH Formula</h1>
            <p class="mt-4 text-xl md:text-2xl hero-subtitle" data-en="A Revolutionary Pivot-Based Market Calculation System" data-id="Sistem Perhitungan Pasar Berbasis Pivot yang Revolusioner">A Revolutionary Pivot-Based Market Calculation System</p>
            <p class="mt-6 max-w-3xl mx-auto text-lg hero-author" data-en="Authored by Adiyat Coto, based on the innovative work of Raffa Jetndrya (RushArt)" data-id="Ditulis oleh Adiyat Coto, berdasarkan karya inovatif Raffa Jetndrya (RushArt)">Authored by Adiyat Coto, based on the innovative work of Raffa Jetndrya (RushArt)</p>
        </section>

        <!-- Section: Abstract / Introduction -->
        <section id="abstract">
            <div class="glass-card top-level">
                <h2 class="section-title mb-4" data-en="Abstract" data-id="Abstrak">
                    Abstract
                </h2>
                <p class="text-lg" data-en="This page presents a comprehensive analysis of the COP TAH Formula, a novel pivot-based market calculation system developed by Raffa Jetndrya (RushArt). Unlike traditional pivot methods that rely primarily on historical price extremes, the COP TAH system introduces a revolutionary <span class='text-cyan-300 font-semibold'>bias-based approach</span> that incorporates current market opening dynamics to create more responsive and predictive support and resistance levels. Through mathematical analysis, we demonstrate that this system exhibits <span class='text-cyan-300 font-semibold'>harmonic properties</span> reminiscent of natural growth patterns, including relationships that approximate the Golden Ratio. This serves as the interactive documentation of this innovative contribution to quantitative market analysis." data-id="Halaman ini menyajikan analisis komprehensif Formula COP TAH, sebuah sistem perhitungan pasar berbasis pivot baru yang dikembangkan oleh Raffa Jetndrya (RushArt). Berbeda dengan metode pivot tradisional yang hanya mengandalkan ekstrem harga historis, sistem COP TAH memperkenalkan <span class='text-cyan-300 font-semibold'>pendekatan berbasis bias</span> revolusioner yang menggabungkan dinamika pembukaan pasar saat ini untuk menciptakan level support dan resistance yang lebih responsif dan prediktif. Melalui analisis matematis, kami menunjukkan bahwa sistem ini menunjukkan <span class='text-cyan-300 font-semibold'>sifat harmonis</span> yang mengingatkan pada pola pertumbuhan alami, termasuk hubungan yang mendekati Rasio Emas. Ini berfungsi sebagai dokumentasi interaktif dari kontribusi inovatif ini terhadap analisis pasar kuantitatif.">This page presents a comprehensive analysis of the COP TAH Formula, a novel pivot-based market calculation system developed by Raffa Jetndrya (RushArt). Unlike traditional pivot methods that rely primarily on historical price extremes, the COP TAH system introduces a revolutionary <span class="text-cyan-300 font-semibold">bias-based approach</span> that incorporates current market opening dynamics to create more responsive and predictive support and resistance levels. Through mathematical analysis, we demonstrate that this system exhibits <span class="text-cyan-300 font-semibold">harmonic properties</span> reminiscent of natural growth patterns, including relationships that approximate the Golden Ratio. This serves as the interactive documentation of this innovative contribution to quantitative market analysis.</p>
            </div>
        </section>

        <!-- Section: The Problem -->
        <section id="problem">
            <div class="glass-card top-level">
                <h2 class="section-title mb-4" data-en="The Problem with Traditional Pivots" data-id="Masalah dengan Pivot Tradisional">
                    The Problem with Traditional Pivots
                </h2>
                <p class="text-lg" data-en="For decades, traders have relied on pivot points. Yet, traditional formulas share a fundamental flaw: they are <span class='highlight'>static and backward-looking</span>. They use fixed coefficients and ignore the most crucial piece of information for an upcoming session: the <span class='highlight'>opening price</span>. In today's fast-paced, 24/7 markets, this outdated approach fails to capture real-time sentiment, leading to unreliable levels." data-id="Selama beberapa dekade, trader mengandalkan titik pivot. Namun, formula tradisional memiliki kelemahan mendasar: mereka <span class='highlight'>statis dan melihat ke belakang</span>. Mereka menggunakan koefisien tetap dan mengabaikan informasi paling penting untuk sesi mendatang: <span class='highlight'>harga pembukaan</span>. Di pasar yang serba cepat dan 24/7 saat ini, pendekatan usang ini gagal menangkap sentimen waktu nyata, yang menyebabkan level yang tidak dapat diandalkan.">For decades, traders have relied on pivot points. Yet, traditional formulas share a fundamental flaw: they are <span class="highlight">static and backward-looking</span>. They use fixed coefficients and ignore the most crucial piece of information for an upcoming session: the <span class="highlight">opening price</span>. In today's fast-paced, 24/7 markets, this outdated approach fails to capture real-time sentiment, leading to unreliable levels.</p>
            </div>
        </section>

        <!-- Section: The Solution -->
        <section id="solution">
            <div class="glass-card top-level">
                 <h2 class="section-title mb-4" data-en="The COP TAH Solution: A Dynamic Core" data-id="Solusi COP TAH: Inti Dinamis">
                    The COP TAH Solution: A Dynamic Core
                </h2>
                <p class="mb-6 text-lg" data-en="The innovation begins with a unique 5-factor Pivot Point calculation. Click the buttons below to highlight the corresponding part of the formula and reveal its purpose." data-id="Inovasi dimulai dengan perhitungan Titik Pivot 5 faktor yang unik. Klik tombol di bawah untuk menyorot bagian formula yang sesuai dan mengungkapkan tujuannya.">The innovation begins with a unique 5-factor Pivot Point calculation. Click the buttons below to highlight the corresponding part of the formula and reveal its purpose.</p>
                <div class="formula-box text-lg mb-6">
                    PP = (<span id="formula-historical">PrevOpen + PrevHigh + PrevLow</span> + <span id="formula-current" class="highlight-formula">2 * CurrOpen</span> - 0.01) / 5
                </div>
                <div class="flex justify-center md:justify-start space-x-4">
                    <button id="btn-60" class="btn btn-inactive" data-en="60% Historical" data-id="60% Historis">60% Historical</button>
                    <button id="btn-40" class="btn btn-active" data-en="40% Bias" data-id="40% Bias">40% Bias</button>
                </div>
                <!-- Explanation Boxes -->
                <div id="explanation-historical" class="explanation-box">
                    <h3 class="font-bold text-white mb-2" data-en="The Historical Context (60%)" data-id="Konteks Historis (60%)">The Historical Context (60%)</h3>
                    <p class="text-gray-300" data-en="This component, comprising the Previous Day's Open, High, and Low, accounts for three of the five factors in the formula (60%). It grounds the calculation in established fact—the completed price action of the prior session. This provides a stable, objective baseline that represents the market's historical equilibrium before the current session's sentiment is introduced." data-id="Komponen ini, yang terdiri dari Pembukaan, Tertinggi, dan Terendah Hari Sebelumnya, menyumbang tiga dari lima faktor dalam formula (60%). Ini mendasari perhitungan pada fakta yang telah ditetapkan—aksi harga yang telah selesai dari sesi sebelumnya. Ini memberikan dasar yang stabil dan objektif yang mewakili keseimbangan historis pasar sebelum sentimen sesi saat ini diperkenalkan.">This component, comprising the Previous Day's Open, High, and Low, accounts for three of the five factors in the formula (60%).  It grounds the calculation in established fact—the completed price action of the prior session. This provides a stable, objective baseline that represents the market's historical equilibrium before the current session's sentiment is introduced.</p>
                </div>
                <div id="explanation-bias" class="explanation-box show">
                    <h3 class="font-bold text-white mb-2" data-en="The Dynamic Bias (40%)" data-id="Bias Dinamis (40%)">The Dynamic Bias (40%)</h3>
                    <p class="text-gray-300" data-en="This is the revolutionary core of the formula. By giving the Current Open a double weighting (two of the five factors, or 40%), the system becomes <span class='text-cyan-300'>forward-looking and bias-aware</span>. It immediately incorporates the most recent market sentiment—the psychology at the moment the new session begins—to dynamically shift the entire pivot structure up or down, making the levels instantly adaptive." data-id="Ini adalah inti revolusioner dari formula. Dengan memberikan bobot ganda pada Pembukaan Saat Ini (dua dari lima faktor, atau 40%), sistem menjadi <span class='text-cyan-300'>berwawasan ke depan dan sadar bias</span>. Ini segera menggabungkan sentimen pasar terbaru—psikologi pada saat sesi baru dimulai—untuk secara dinamis menggeser seluruh struktur pivot ke atas atau ke bawah, membuat level-level tersebut langsung adaptif.">This is the revolutionary core of the formula. By giving the Current Open a double weighting (two of the five factors, or 40%), the system becomes <span class="text-cyan-300">forward-looking and bias-aware</span>. It immediately incorporates the most recent market sentiment—the psychology at the moment the new session begins—to dynamically shift the entire pivot structure up or down, making the levels instantly adaptive.</p>
                </div>
                <!-- Footnote -->
                <div class="mt-6 pt-6 border-t border-gray-700/50">
                    <p class="text-sm text-gray-500 italic text-center" data-en="*A key departure from traditional pivots: Notice the deliberate omission of the `Close` price. This formula prioritizes opening sentiment over the closing settlement, a core tenet of its forward-looking philosophy." data-id="*Perbedaan utama dari pivot tradisional: Perhatikan penghilangan harga `Penutupan` secara sengaja. Formula ini memprioritaskan sentimen pembukaan daripada penyelesaian penutupan, sebuah prinsip inti dari filosofi berwawasan ke depan.">
                        *A key departure from traditional pivots: Notice the deliberate omission of the `Close` price. This formula prioritizes opening sentiment over the closing settlement, a core tenet of its forward-looking philosophy.
                    </p>
                </div>
            </div>
        </section>

        <!-- Section: Logic Behind Levels -->
        <section id="logic">
            <div class="glass-card top-level">
                <h2 class="section-title text-center mb-2" data-en="The Logic Behind Support & Resistance" data-id="Logika di Balik Support & Resistance">
                    The Logic Behind Support & Resistance
                </h2>
                <p class="text-lg text-center mb-8" data-en="Unlike traditional pivots, each S/R level in the COP TAH system has a clear mathematical purpose." data-id="Berbeda dengan pivot tradisional, setiap level S/R dalam sistem COP TAH memiliki tujuan matematis yang jelas.">Unlike traditional pivots, each S/R level in the COP TAH system has a clear mathematical purpose.</p>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="glass-card !p-6 max-w-none mx-0">
                        <h3 class="mb-2" data-en="The Mirror Principle" data-id="Prinsip Cermin">The Mirror Principle</h3>
                        <p class="text-gray-400 mb-4" data-en="The first level is a 'mirror' of the previous day's High/Low, centered around the Pivot Point (PP). The distance from PP to the previous High is mirrored to calculate S1, and the distance to the previous Low is mirrored for R1." data-id="Level pertama adalah 'cermin' dari Tertinggi/Terendah hari sebelumnya, berpusat di sekitar Titik Pivot (PP). Jarak dari PP ke Tertinggi sebelumnya dicerminkan untuk menghitung S1, dan jarak ke Terendah sebelumnya dicerminkan untuk R1.">The first level is a 'mirror' of the previous day's High/Low, centered around the Pivot Point (PP). The distance from PP to the previous High is mirrored to calculate S1, and the distance to the previous Low is mirrored for R1.</p>
                        <div class="formula-box text-sm">S1 = (2 * PP) - PrevHigh</div>
                    </div>
                    <div class="glass-card !p-6 max-w-none mx-0">
                        <h3 class="mb-2" data-en="Volatility Scaling" data-id="Skala Volatilitas">Volatility Scaling</h3>
                        <p class="text-gray-400 mb-4" data-en="The second level uses the entire previous day's Range as a measure of volatility. This causes the levels to expand during high volatility and contract during low volatility." data-id="Level kedua menggunakan seluruh Rentang hari sebelumnya sebagai ukuran volatilitas. Ini menyebabkan level meluas selama volatilitas tinggi dan menyusut selama volatilitas rendah.">The second level uses the entire previous day's Range as a measure of volatility. This causes the levels to expand during high volatility and contract during low volatility.</p>
                        <div class="formula-box text-sm">S2 = PP - (PrevHigh - PrevLow)</div>
                    </div>
                    <div class="glass-card !p-6 max-w-none mx-0">
                        <h3 class="mb-2" data-en="Progressive Scaling" data-id="Skala Progresif">Progressive Scaling</h3>
                        <p class="text-gray-400 mb-4" data-en="The outer levels are calculated using a progressive formula that creates increasingly larger distances from the center, anticipating strong trending moves or breakouts." data-id="Level luar dihitung menggunakan formula progresif yang menciptakan jarak yang semakin besar dari pusat, mengantisipasi pergerakan tren yang kuat atau breakout.">The outer levels are calculated using a progressive formula that creates increasingly larger distances from the center, anticipating strong trending moves or breakouts.</p>
                        <div class="formula-box text-sm">S3 = (2*PP) - ((2*PrevH)-PrevL)</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section: Bias Principle -->
        <section id="bias">
            <div class="glass-card top-level">
                <h2 class="section-title text-center mb-2" data-en="The Bias Principle: A Visual Explanation" data-id="Prinsip Bias: Penjelasan Visual">
                    The Bias Principle: A Visual Explanation
                </h2>
                <p class="text-lg text-center mb-8" data-en="The formula's core strength is how it translates opening sentiment into the pivot structure. See how the levels shift based on the relationship between the previous open and the current open." data-id="Kekuatan inti formula adalah bagaimana ia menerjemahkan sentimen pembukaan ke dalam struktur pivot. Lihat bagaimana level bergeser berdasarkan hubungan antara pembukaan sebelumnya dan pembukaan saat ini.">The formula's core strength is how it translates opening sentiment into the pivot structure. See how the levels shift based on the relationship between the previous open and the current open.</p>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Bullish Bias Visualization -->
                    <div class="glass-card !p-6 max-w-none mx-0">
                        <h3 class="text-xl font-bold text-center text-green-400 mb-4 flex items-center justify-center gap-3" data-en="Bullish Bias" data-id="Bias Bullish">
                            <i data-lucide="trending-up"></i>
                            Bullish Bias
                        </h3>
                        <svg viewBox="0 0 200 120" class="w-full h-auto">
                            <text x="4" y="94" class="text-xs svg-label" fill="var(--color-svg-text-default)" text-anchor="left" dominant-baseline="left" data-en="PO" data-id="PO">Prev Open</text>
                            <line x1="25" y1="90" x2="80" y2="90" stroke="var(--color-svg-line-default)" stroke-width="1.5" stroke-dasharray="3 3"/>
                            <g>
                                <line x1="120" y1="20" x2="180" y2="20" stroke="var(--color-svg-line-r)" stroke-width="1"/>
                                <text x="195" y="20" class="text-xs" fill="var(--color-svg-label-r)" text-anchor="end" dominant-baseline="middle">R1</text>
                                <line x1="120" y1="47" x2="180" y2="47" stroke="var(--color-svg-line-s)" stroke-width="1.5" stroke-dasharray="3 3"/>
                                <text x="100" y="50" class="text-xs font-semibold svg-label" fill="var" text-anchor="left" dominant-baseline="left" data-en="CO" data-id="CO">Curr Open</text>
                                <line x1="120" y1="65" x2="180" y2="65" stroke="var(--color-svg-line-r)" stroke-width="1"/>
                                <text x="195" y="65" class="text-xs" fill="var(--color-svg-line-r)" text-anchor="end" dominant-baseline="middle">PP</text>
                                <line x1="120" y1="90" x2="180" y2="90" stroke="var(--color-svg-line-s)" stroke-width="1"/>
                                <text x="195" y="90" class="text-xs" fill="var(--color-svg-label-s)" text-anchor="end" dominant-baseline="middle">S1</text>
                            </g>
                        </svg>
                        <p class="text-center mt-4 text-gray-400" data-en="When <span class='text-green-400'>CurrOpen > PrevOpen</span>, the entire pivot structure is shifted <span class='font-bold text-white'>UPWARDS</span>." data-id="Ketika <span class='text-green-400'>Pembukaan Saat Ini > Pembukaan Sebelumnya</span>, seluruh struktur pivot digeser <span class='font-bold text-white'>KE ATAS</span>.">When <span class="text-green-400">CurrOpen > PrevOpen</span>, the entire pivot structure is shifted <span class="font-bold text-white">UPWARDS</span>.</p>
                    </div>
                    <!-- Bearish Bias Visualization -->
                    <div class="glass-card !p-6 max-w-none mx-0">
                        <h3 class="text-xl font-bold text-center text-red-400 mb-4 flex items-center justify-center gap-3" data-en="Bearish Bias" data-id="Bias Bearish">
                            <i data-lucide="trending-down"></i>
                            Bearish Bias
                        </h3>
                        <svg viewBox="0 0 200 120" class="w-full h-auto">
                            <text x="4" y="23" class="text-xs svg-label" fill="var(--color-svg-text-default)" text-anchor="left" dominant-baseline="left" data-en="PO" data-id="PO">Prev Open</text>
                            <line x1="25" y1="20" x2="80" y2="20" stroke="var(--color-svg-line-default)" stroke-width="1.5" stroke-dasharray="3 3"/>
                            <g>
                                <line x1="120" y1="20" x2="180" y2="20" stroke="var(--color-svg-line-r)" stroke-width="1"/>
                                <text x="195" y="20" class="text-xs" fill="var(--color-svg-label-r)" text-anchor="end" dominant-baseline="middle">R1</text>
                                <line x1="120" y1="65" x2="180" y2="65" stroke="var(--color-svg-line-s)" stroke-width="1.5" stroke-dasharray="3 3"/>
                                <text x="100" y="68" class="text-xs font-semibold svg-label" fill="var" text-anchor="left" dominant-baseline="left" data-en="CO" data-id="CO">Curr Open</text>
                                <line x1="120" y1="47" x2="180" y2="47" stroke="var(--color-svg-line-r)" stroke-width="1"/>
                                <text x="195" y="48" class="text-xs" fill="var(--color-svg-line-r)" text-anchor="end" dominant-baseline="middle">PP</text>
                                <line x1="120" y1="90" x2="180" y2="90" stroke="var(--color-svg-line-s)" stroke-width="1"/>
                                <text x="195" y="90" class="text-xs" fill="var(--color-svg-label-s)" text-anchor="end" dominant-baseline="middle">S1</text>
                            </g>
                        </svg>
                        <p class="text-center mt-4 text-gray-400" data-en="When <span class='text-red-400'>CurrOpen < PrevOpen</span>, the entire pivot structure is shifted <span class='font-bold text-white'>DOWNWARDS</span>." data-id="Ketika <span class='text-red-400'>Pembukaan Saat Ini < Pembukaan Sebelumnya</span>, seluruh struktur pivot digeser <span class='font-bold text-white'>KE BAWAH</span>.">When <span class="text-red-400">CurrOpen < PrevOpen</span>, the entire pivot structure is shifted <span class="font-bold text-white">DOWNWARDS</span>.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Combined Visualizer and Analysis Section -->
        <section id="visualizer" class="grid lg:grid-cols-2 gap-8 items-start">
            <div class="glass-card top-level h-full flex flex-col">
                 <h2 class="section-title text-center mb-8" data-en="Interactive Real-Time Visualizer" data-id="Visualisator Interaktif Waktu Nyata">
                    Interactive Real-Time Visualizer
                </h2>
                <div class="grid md:grid-cols-2 gap-x-8 gap-y-6 mb-8">
                    <div>
                        <label for="prevOpen" class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);" data-en="Prev Open" data-id="Pembukaan Sebelumnya">Prev Open</label>
                        <div class="flex items-center space-x-3">
                            <input type="number" id="prevOpen" value="100" class="w-24 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" style="background-color: var(--color-input-bg); border: 1px solid var(--color-input-border); color: var(--color-input-text);">
                            <input type="range" id="prevOpenSlider" min="50" max="150" value="100" class="w-full">
                        </div>
                    </div>
                    <div>
                        <label for="prevHigh" class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);" data-en="Prev High" data-id="Tertinggi Sebelumnya">Prev High</label>
                        <div class="flex items-center space-x-3">
                            <input type="number" id="prevHigh" value="110" class="w-24 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" style="background-color: var(--color-input-bg); border: 1px solid var(--color-input-border); color: var(--color-input-text);">
                            <input type="range" id="prevHighSlider" min="60" max="160" value="110" class="w-full">
                        </div>
                    </div>
                    <div>
                        <label for="prevLow" class="block text-sm font-medium mb-2" style="color: var(--color-text-primary);" data-en="Prev Low" data-id="Terendah Sebelumnya">Prev Low</label>
                        <div class="flex items-center space-x-3">
                            <input type="number" id="prevLow" value="95" class="w-24 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" style="background-color: var(--color-input-bg); border: 1px solid var(--color-input-border); color: var(--color-input-text);">
                            <input type="range" id="prevLowSlider" min="45" max="145" value="95" class="w-full">
                        </div>
                    </div>
                    <div>
                        <label for="currOpen" class="block text-sm font-medium mb-2" style="color: var(--color-accent);" data-en="Curr Open (Bias)" data-id="Pembukaan Saat Ini (Bias)">Curr Open (Bias)</label>
                        <div class="flex items-center space-x-3">
                            <input type="number" id="currOpen" value="105" class="w-24 rounded-md p-2 focus:ring-cyan-500 focus:border-cyan-500" style="background-color: var(--color-input-bg); border: 1px solid var(--color-input-border); color: var(--color-input-text);">
                            <input type="range" id="currOpenSlider" min="55" max="155" value="105" class="w-full">
                        </div>
                    </div>
                </div>
                <div class="grid md:grid-cols-12 gap-8 flex-grow">
                    <div class="col-span-12 md:col-span-7 chart-container" id="chartContainer"></div>
                    <div class="col-span-12 md:col-span-5 glass-card !p-4 h-full overflow-y-auto" id="levels-output"></div>
                </div>
            </div>
            
            <div class="glass-card top-level h-full flex flex-col">
                <h2 class="section-title text-center mb-2" data-en="Harmonic Analysis" data-id="Analisis Harmonik">
                    Harmonic Analysis
                </h2>
                <div class="text-center max-w-3xl mx-auto flex-shrink-0">
                    <p class="text-lg mb-2" data-en="This analysis examines the <span class='highlight'>deviation</span> of each level from the central Pivot Point. Harmoniously expanding or contracting distances can indicate potential trend continuation or consolidation." data-id="Analisis ini menguji <span class='highlight'>deviasi</span> setiap level dari Titik Pivot pusat. Jarak yang memuai atau menyusut secara harmonis dapat menunjukkan kelanjutan tren atau konsolidasi yang potensial.">This analysis examines the <span class="highlight">deviation</span> of each level from the central Pivot Point. Harmoniously expanding or contracting distances can indicate potential trend continuation or consolidation.</p>
                    <p class="text-lg mb-6" data-en="These patterns, especially those approaching the Golden Ratio ($\phi \approx 1.618$), are often considered natural equilibrium zones in the market." data-id="Pola-pola ini, terutama yang mendekati Rasio Emas ($\phi \approx 1.618$), sering dianggap sebagai zona keseimbangan alami di pasar.">These patterns, especially those approaching the Golden Ratio ($\phi \approx 1.618$), are often considered natural equilibrium zones in the market.</p>
                </div>
                <div class="w-full max-w-4xl mx-auto p-4 glass-card flex-grow flex flex-col">
                    <div id="distance-chart-container" class="relative h-64 flex items-end justify-center space-x-1 mb-4 flex-grow"></div>
                    <div class="space-y-3 flex-shrink-0">
                        <p data-en="<strong class='text-cyan-300'>How to Read the Chart:</strong> The chart visualizes the total distance of each level from the central Pivot Point (PP). Progressively taller bars signify <span class='text-white'>greater deviation from equilibrium</span>. Bars that glow have a distance ratio approaching the Golden Ratio, as shown in the table." data-id="<strong class='text-cyan-300'>Cara Membaca Grafik:</strong> Grafik memvisualisasikan total jarak setiap level dari Titik Pivot pusat (PP). Batang yang semakin tinggi menandakan <span class='text-white'>deviasi yang lebih besar dari keseimbangan</span>. Batang yang bersinar memiliki rasio jarak yang mendekati Rasio Emas, seperti yang ditunjukkan dalam tabel."><strong class="text-cyan-300">How to Read the Chart:</strong> The chart visualizes the total distance of each level from the central Pivot Point (PP). Progressively taller bars signify <span class="text-white">greater deviation from equilibrium</span>. Bars that glow have a distance ratio approaching the Golden Ratio, as shown in the table.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Core Principles -->
        <section id="principles">
            <div class="glass-card top-level">
                <h2 class="section-title text-center mb-8" data-en="Core Principles Explained" data-id="Prinsip Inti Dijelaskan">
                    Core Principles Explained
                </h2>
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-wrap justify-center gap-2 mb-4" id="tabs-container">
                        <button class="tab-button btn active" data-tab="bias" data-en="Bias Awareness" data-id="Kesadaran Bias">Bias Awareness</button>
                        <button class="tab-button btn inactive" data-tab="volatility" data-en="Volatility Adaptation" data-id="Adaptasi Volatilitas">Volatility Adaptation</button>
                        <button class="tab-button btn inactive" data-tab="scaling" data-en="Progressive Scaling" data-id="Skala Progresif">Progressive Scaling</button>
                        <button class="tab-button btn inactive" data-tab="harmony" data-en="Mathematical Harmony" data-id="Harmoni Matematis">Mathematical Harmony</button>
                    </div>
                    <div id="tab-content-container">
                        <div id="tab-bias" class="tab-content active">
                            <div class="flex flex-col md:flex-row items-center gap-6">
                                <div class="flex-shrink-0 text-cyan-400"><i data-lucide="target"></i></div>
                                <div>
                                    <h3 class="mb-2" data-en="Bias Awareness" data-id="Kesadaran Bias">Bias Awareness</h3>
                                    <p class="text-gray-400" data-en="This principle is the heart of the formula. By giving a 40% weight to `CurrOpen`, the system becomes <span class='text-white'>forward-looking</span>. It doesn't just see past data; it actively measures market sentiment as the new session begins. If the market opens higher than the previous open, the system automatically shifts all levels upwards, anticipating bullish momentum, and vice-versa for a bearish bias. This is real-time adaptation to market psychology." data-id="Prinsip ini adalah inti dari formula. Dengan memberikan bobot 40% pada `Pembukaan Saat Ini`, sistem menjadi <span class='text-white'>berwawasan ke depan</span>. Ini tidak hanya melihat data masa lalu; ia secara aktif mengukur sentimen pasar saat sesi baru dimulai. Jika pasar dibuka lebih tinggi dari pembukaan sebelumnya, sistem secara otomatis menggeser semua level ke atas, mengantisipasi momentum bullish, dan sebaliknya untuk bias bearish. Ini adalah adaptasi waktu nyata terhadap psikologi pasar.">This principle is the heart of the formula. By giving a 40% weight to `CurrOpen`, the system becomes <span class="text-white">forward-looking</span>. It doesn't just see past data; it actively measures market sentiment as the new session begins. If the market opens higher than the previous open, the system automatically shifts all levels upwards, anticipating bullish momentum, and vice-versa for a bearish bias. This is real-time adaptation to market psychology.</p>
                                </div>
                            </div>
                        </div>
                        <div id="tab-volatility" class="tab-content">
                            <div class="flex flex-col md:flex-row items-center gap-6">
                                <div class="flex-shrink-0 text-cyan-400"><i data-lucide="activity"></i></div>
                                <div>
                                    <h3 class="mb-2" data-en="Volatility Adaptation" data-id="Adaptasi Volatilitas">Volatility Adaptation</h3>
                                    <p class="text-gray-400" data-en="The system dynamically adapts to volatility. The formulas for R2 and S2 explicitly use the `Range` (the difference between `PrevHigh` and `PrevLow`). If the previous day was volatile (large range), the distance between PP and R2/S2 will expand. If the market was calm (small range), the distance contracts. This ensures that targets and support/resistance are always proportional to the current market conditions, not static." data-id="Sistem ini secara dinamis beradaptasi dengan volatilitas. Formula untuk R2 dan S2 secara eksplisit menggunakan `Rentang` (perbedaan antara `Tertinggi Sebelumnya` dan `Terendah Sebelumnya`). Jika hari sebelumnya bergejolak (rentang besar), jarak antara PP dan R2/S2 akan meluas. Jika pasar tenang (rentang kecil), jarak menyusut. Ini memastikan bahwa target dan support/resistance selalu proporsional dengan kondisi pasar saat ini, bukan statis.">The system dynamically adapts to volatility. The formulas for R2 and S2 explicitly use the `Range` (the difference between `PrevHigh` and `PrevLow`). If the previous day was volatile (large range), the distance between PP and R2/S2 will expand. If the market was calm (small range), the distance contracts. This ensures that targets and support/resistance are always proportional to the current market conditions, not static.</p>
                                </div>
                            </div>
                        </div>
                        <div id="tab-scaling" class="tab-content">
                            <div class="flex flex-col md:flex-row items-center gap-6">
                                <div class="flex-shrink-0 text-cyan-400"><i data-lucide="maximize-2"></i></div>
                                <div>
                                    <h3 class="mb-2" data-en="Progressive Scaling" data-id="Skala Progresif">Progressive Scaling</h3>
                                    <p class="text-gray-400" data-en="The outer levels (R3-R5 and S3-S5) are designed to capture extreme moves. They are calculated using a <span class='text-white'>progressive formula</span> that expands outwards. The logic is that the further price moves from equilibrium (PP), the more momentum it has. Therefore, the next level must be placed even further away to anticipate a strong trend or breakout condition, giving the price room to move." data-id="Level luar (R3-R5 dan S3-S5) dirancang untuk menangkap pergerakan ekstrem. Mereka dihitung menggunakan <span class='text-white'>formula progresif</span> yang meluas keluar. Logikanya adalah semakin jauh harga bergerak dari keseimbangan (PP), semakin banyak momentum yang dimilikinya. Oleh karena itu, level berikutnya harus ditempatkan lebih jauh lagi untuk mengantisipasi tren yang kuat atau kondisi breakout, memberikan ruang bagi harga untuk bergerak.">The outer levels (R3-R5 and S3-S5) are designed to capture extreme moves. They are calculated using a <span class="text-white">progressive formula</span> that expands outwards. The logic is that the further price moves from equilibrium (PP), the more momentum it has. Therefore, the next level must be placed even further away to anticipate a strong trend or breakout condition, giving the price room to move.</p>
                                </div>
                            </div>
                        </div>
                        <div id="tab-harmony" class="tab-content">
                            <div class="flex flex-col md:flex-row items-center gap-6">
                                <div class="flex-shrink-0 text-cyan-400"><i data-lucide="infinity"></i></div>
                                <div>
                                    <h3 class="mb-2" data-en="Mathematical Harmony" data-id="Harmoni Matematis">Mathematical Harmony</h3>
                                    <p class="text-gray-400" data-en="This is a unique emergent property. The relationship between level distances often naturally produces the <span class='text-white'>Golden Ratio</span>. This is not forced; it's a result of the interaction between the balanced formula structure and market data. This suggests the formula may align with the market's natural rhythm, meaning the resulting levels are not random lines but psychologically significant equilibrium zones." data-id="Ini adalah properti unik yang muncul. Hubungan antara jarak level seringkali secara alami menghasilkan <span class='text-white'>Rasio Emas</span>. Ini tidak dipaksakan; ini adalah hasil interaksi antara struktur formula yang seimbang dan data pasar. Ini menunjukkan bahwa formula mungkin selaras dengan ritme alami pasar, yang berarti level yang dihasilkan bukanlah garis acak tetapi zona keseimbangan yang signifikan secara psikologis.">This is a unique emergent property. The relationship between level distances often naturally produces the <span class="text-white">Golden Ratio</span>. This is not forced; it's a result of the interaction between the balanced formula structure and market data. This suggests the formula may align with the market's natural rhythm, meaning the resulting levels are not random lines but psychologically significant equilibrium zones.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Download Whitepaper Section -->
        <section id="download-whitepaper" class="py-16 md:py-24 text-center">
            <div class="glass-card top-level">
                <h2 class="section-title mb-4" data-en="Download the Whitepaper" data-id="Unduh Whitepaper">Download the Whitepaper</h2>
                <p class="text-lg max-w-3xl mx-auto mb-8" data-en="Access the complete documentation for the COP TAH Formula, including detailed explanations, mathematical derivations, and practical applications." data-id="Akses dokumentasi lengkap untuk Formula COP TAH, termasuk penjelasan rinci, derivasi matematis, dan aplikasi praktis.">Access the complete documentation for the COP TAH Formula, including detailed explanations, mathematical derivations, and practical applications.</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/docs/COPTAH_Whitepaper.pdf" class="btn-download-primary inline-flex items-center" data-en="Download PDF" data-id="Unduh PDF">
                        <i data-lucide="download"></i> Download PDF
                    </a>
                    <a href="/index.html#projects" class="btn-download-secondary inline-flex items-center" data-en="Back to Portfolio" data-id="Kembali ke Portofolio">
                        <i data-lucide="arrow-left"></i> Back to Portfolio
                    </a>
                </div>
            </div>
        </section>

    </main>

    <footer class="py-12 px-4 text-center text-gray-500">
        <p data-en="© 2024 Adiyat Coto. All rights reserved." data-id="© 2024 Adiyat Coto. Semua hak dilindungi undang-undang.">© 2024 Adiyat Coto. All rights reserved.</p>
        <p class="mt-2 text-xs" data-en="Based on the whitepaper &quot;The COP TAH Formula: A Revolutionary Pivot-Based Market Calculation System&quot; by Adiyat Coto, from the work of Raffa Jetndrya (RushArt)." data-id="Berdasarkan whitepaper &quot;Formula COP TAH: Sistem Perhitungan Pasar Berbasis Pivot Revolusioner&quot; oleh Adiyat Coto, dari karya Raffa Jetndrya (RushArt).">Based on the whitepaper "The COP TAH Formula: A Revolutionary Pivot-Based Market Calculation System" by Adiyat Coto, from the work of Raffa Jetndrya (RushArt).</p>
        <p class="mt-1 text-xs" data-en="This webpage is for educational and illustrative purposes only." data-id="Halaman web ini hanya untuk tujuan pendidikan dan ilustrasi.">This webpage is for educational and illustrative purposes only.</p>
    </footer>

<script>
    // --- Mobile Menu Functionality ---
    function toggleMobileMenu() {
        const mobileMenu = document.querySelector('.mobile-menu');
        const overlay = document.querySelector('.mobile-menu-overlay');
        const toggleButton = document.querySelector('.mobile-menu-toggle');
        const isActive = mobileMenu.classList.toggle('active');
        overlay.classList.toggle('active');
        toggleButton.setAttribute('aria-expanded', isActive);
        toggleButton.setAttribute('aria-label', isActive ? 'Close mobile menu' : 'Open mobile menu');
    }

    function closeMobileMenu() {
        const mobileMenu = document.querySelector('.mobile-menu');
        const overlay = document.querySelector('.mobile-menu-overlay');
        const toggleButton = document.querySelector('.mobile-menu-toggle');
        mobileMenu.classList.remove('active');
        overlay.classList.remove('active');
        toggleButton.setAttribute('aria-expanded', 'false');
        toggleButton.setAttribute('aria-label', 'Open mobile menu');
    }

document.addEventListener('DOMContentLoaded', function() {
    // --- Interactive Formula Highlight ---
    const btn60 = document.getElementById('btn-60');
    const btn40 = document.getElementById('btn-40');
    const formulaHistorical = document.getElementById('formula-historical');
    const formulaCurrent = document.getElementById('formula-current');
    const explanationHistorical = document.getElementById('explanation-historical');
    const explanationBias = document.getElementById('explanation-bias');

    if(explanationHistorical) explanationHistorical.classList.remove('show');
    if(explanationBias) explanationBias.classList.add('show');

    if (btn60) {
        btn60.addEventListener('click', () => {
            if (formulaHistorical) formulaHistorical.classList.add('highlight-formula');
            if (formulaCurrent) formulaCurrent.classList.remove('highlight-formula');
            btn60.classList.remove('btn-inactive');
            btn60.classList.add('btn-active');
            if (btn40) {
                btn40.classList.remove('btn-active');
                btn40.classList.add('btn-inactive');
            }
            if(explanationHistorical) explanationHistorical.classList.add('show');
            if(explanationBias) explanationBias.classList.remove('show');
        });
    }

    if (btn40) {
        btn40.addEventListener('click', () => {
            if (formulaCurrent) formulaCurrent.classList.add('highlight-formula');
            if (formulaHistorical) formulaHistorical.classList.remove('highlight-formula');
            btn40.classList.remove('btn-inactive');
            btn40.classList.add('btn-active');
            if (btn60) {
                btn60.classList.remove('btn-active');
                btn60.classList.add('btn-inactive');
            }
            if(explanationBias) explanationBias.classList.add('show');
            if(explanationHistorical) explanationHistorical.classList.remove('show');
        });
    }


    // --- Interactive Calculator ---
    const chartContainer = document.getElementById('chartContainer');
    const levelsOutput = document.getElementById('levels-output');
    const inputIds = ['prevOpen', 'prevHigh', 'prevLow', 'currOpen'];
    const distanceChartContainer = document.getElementById('distance-chart-container');

    function calculateAndVisualize() {
        const values = {};
        inputIds.forEach(id => {
            const el = document.getElementById(id);
            if(el) values[id] = parseFloat(el.value);
        });

        const { prevOpen, prevHigh, prevLow, currOpen } = values;
        if ([prevOpen, prevHigh, prevLow, currOpen].some(v => v === undefined || isNaN(v))) return;

        const pp = (prevOpen + prevHigh + prevLow + (2 * currOpen) - 0.01) / 5;
        const range = prevHigh - prevLow;
        const levels = {
            R5: (pp * 4) + (prevHigh - (4 * prevLow)), R4: (pp * 3) + (prevHigh - (3 * prevLow)),
            R3: (pp * 2) + (prevHigh - (2 * prevLow)), R2: pp + range, R1: (pp * 2) - prevLow,
            PP: pp, S1: (pp * 2) - prevHigh, S2: pp - range,
            S3: (pp * 2) - ((2 * prevHigh) - prevLow), 
            S4: (pp * 3) - ((3 * prevHigh) - prevLow),
            S5: (pp * 4) - ((4 * prevHigh) - prevLow)
        };

        // [FIXED] Moved data calculation to a higher scope
        const resistanceData = ['R1', 'R2', 'R3', 'R4', 'R5'].map(levelName => ({ name: levelName, type: 'R', dist: Math.abs(levels[levelName] - pp) }));
        resistanceData.forEach((data, i) => data.ratio = (i > 0) ? (data.dist / resistanceData[i - 1].dist) : 0);

        const supportData = ['S1', 'S2', 'S3', 'S4', 'S5'].map(levelName => ({ name: levelName, type: 'S', dist: Math.abs(levels[levelName] - pp) }));
        supportData.forEach((data, i) => data.ratio = (i > 0) ? (data.dist / supportData[i - 1].dist) : 0);


        const allValues = Object.values(levels).concat([prevHigh, prevLow, prevOpen, currOpen]);
        const chartMax = Math.max(...allValues);
        const chartMin = Math.min(...allValues);
        const chartRange = chartMax - chartMin;
        const paddedMax = chartMax + chartRange * 0.15;
        const paddedMin = chartMin - chartRange * 0.15;
        const paddedRange = paddedMax - paddedMin;

        if(chartContainer) chartContainer.innerHTML = '';
        const getY = (price) => 100 - ((price - paddedMin) / paddedRange) * 100;
        
        const chartWidth = chartContainer ? chartContainer.clientWidth : 0;
        
        // Draw Previous Day Candlestick
        const wickTop = getY(prevHigh);
        const wickBottom = getY(prevLow);
        const prevDayX = chartWidth * 0.1;

        const candleWick = document.createElement('div');
        Object.assign(candleWick.style, {
            position: 'absolute', left: `${prevDayX + 7}px`, top: `${wickTop}%`, height: `${wickBottom - wickTop}%`,
            backgroundColor: 'var(--color-prev-day)', width: '2px'
        });
        if(chartContainer) chartContainer.appendChild(candleWick);

        const isBullish = currOpen > prevOpen;
        const candleBodyColor = isBullish ? 'var(--color-level-s)' : 'var(--color-level-r)';

        const bodyTopY = getY(Math.max(prevOpen, currOpen));
        const bodyBottomY = getY(Math.min(prevOpen, currOpen));
        const bodyHeight = bodyBottomY - bodyTopY;

        const candleBody = document.createElement('div');
        Object.assign(candleBody.style, {
            position: 'absolute', left: `${prevDayX}px`, top: `${bodyTopY}%`,
            height: `${bodyHeight > 0 ? bodyHeight : 1}%`, width: '16px',
            backgroundColor: candleBodyColor, border: '1px solid rgba(0,0,0,0.3)'
        });
        if(chartContainer) chartContainer.appendChild(candleBody);
        
        const prevDayLabel = document.createElement('span');
        prevDayLabel.textContent = currentLanguage === 'en' ? 'Prev Day' : 'Hari Sblm';
        Object.assign(prevDayLabel.style, {
            position: 'absolute', top: `${wickBottom + 2}%`, left: `${prevDayX - 10}px`,
            color: 'var(--color-prev-day)', fontSize: '12px'
        });
        if(chartContainer) chartContainer.appendChild(prevDayLabel);

        // Draw Current Open Line
        const currOpenY = getY(currOpen);
        const currOpenLine = document.createElement('div');
        Object.assign(currOpenLine.style, {
            position: 'absolute', top: `${currOpenY}%`, left: '0', right: '0', height: '1px',
            borderTop: `1px dashed var(--color-curr-open-line)`, opacity: '0.8'
        });
        if(chartContainer) chartContainer.appendChild(currOpenLine);
        const currOpenLabel = document.createElement('div');
        currOpenLabel.textContent = `${currentLanguage === 'en' ? 'Curr Open' : 'Buka Saat Ini'}: ${currOpen.toFixed(2)}`;
        Object.assign(currOpenLabel.style, {
            position: 'absolute', top: `${currOpenY}%`, left: '10px', transform: 'translateY(-120%)',
            color: 'var(--color-curr-open-label-text)', fontSize: '12px', fontWeight: 'bold',
            backgroundColor: 'var(--color-curr-open-label-bg)', padding: '2px 4px', borderRadius: '4px'
        });
        if(chartContainer) chartContainer.appendChild(currOpenLabel);

        // Draw Pivot Lines
        const levelColors = { R: 'var(--color-level-r)', S: 'var(--color-level-s)', PP: 'var(--color-level-pp)' };
        const allLevelsSorted = Object.entries(levels).sort((a, b) => b[1] - a[1]); 

        allLevelsSorted.forEach(([name, value]) => {
            const y = getY(value);
            const color = name.startsWith('R') ? levelColors.R : name.startsWith('S') ? levelColors.S : levelColors.PP;
            
            const line = document.createElement('div');
            line.className = 'pivot-line';
            Object.assign(line.style, {
                left: '0', right: '0', top: `${y}%`, backgroundColor: color, opacity: '0.3'
            });
            if (name === 'PP') line.style.borderTop = `2px dashed ${color}`;

            const label = document.createElement('div');
            label.className = 'pivot-label-box';
            Object.assign(label.style, {
                top: `${y}%`, right: '10px', transform: 'translateY(-50%)', backgroundColor: color, color: '#FFFFFF'
            });
            label.textContent = `${name}: ${value.toFixed(2)}`;
            
            if(chartContainer) chartContainer.appendChild(line);
            if(chartContainer) chartContainer.appendChild(label);
        });
        
        // Update Levels & Analysis Panel
        if(levelsOutput) {
            let levelsHTML = `<h3 class="font-bold text-white mb-4 border-b border-gray-700 pb-2">${currentLanguage === 'en' ? 'Calculated Levels' : 'Level Terhitung'}</h3><div class="space-y-2 text-sm font-mono">`;
            allLevelsSorted.forEach(([name, value]) => {
                const color = name.startsWith('R') ? levelColors.R : name.startsWith('S') ? levelColors.S : levelColors.PP;
                levelsHTML += `<div class="flex justify-between items-center">
                    <span style="color:${color}; font-weight:600;">${name}</span>
                    <span style="color:var(--color-text-primary);">${value.toFixed(3)}</span>
                </div>`;
            });
            levelsHTML += `</div>`;
            
            levelsHTML += `<h3 class="font-bold text-white mt-6 mb-4 border-b border-gray-700 pb-2">${currentLanguage === 'en' ? 'Distance Analysis (from PP)' : 'Analisis Jarak (dari PP)'}</h3>`;
            levelsHTML += `<div class="text-xs space-y-3 mt-3">`;

            levelsHTML += `<div class="font-bold" style="color:var(--color-level-r)">${currentLanguage === 'en' ? 'Resistance Deviation' : 'Deviasi Resistance'}</div>`;
            resistanceData.slice().reverse().forEach(({ name, dist, ratio }) => {
                const ratioStyle = (Math.abs(ratio - 1.618) < 0.1 || Math.abs(ratio - 0.618) < 0.1) ? `color: var(--color-level-pp); font-weight: bold;` : `color: var(--color-text-secondary);`;
                levelsHTML += `<div class="grid grid-cols-3 items-center"><span style="color:var(--color-text-secondary);">${name}-PP</span><span style="color:var(--color-text-primary); text-align: right;">${dist.toFixed(3)}</span><span style="${ratioStyle} text-align: right;">${ratio > 0 ? ratio.toFixed(3) : '-'}</span></div>`;
            });

            levelsHTML += `<div class="font-bold mt-3" style="color:var(--color-level-s)">${currentLanguage === 'en' ? 'Support Deviation' : 'Deviasi Support'}</div>`;
            supportData.forEach(({ name, dist, ratio }) => {
                const ratioStyle = (Math.abs(ratio - 1.618) < 0.1 || Math.abs(ratio - 0.618) < 0.1) ? `color: var(--color-level-pp); font-weight: bold;` : `color: var(--color-text-secondary);`;
                levelsHTML += `<div class="grid grid-cols-3 items-center"><span style="color:var(--color-text-secondary);">PP-${name}</span><span style="color:var(--color-text-primary); text-align: right;">${dist.toFixed(3)}</span><span style="${ratioStyle} text-align: right;">${ratio > 0 ? ratio.toFixed(3) : '-'}</span></div>`;
            });

            levelsHTML += `</div>`;
            levelsHTML += `<div class="mt-4 text-xs text-gray-400 flex items-start gap-2">
                <i data-lucide="info" class="h-4 w-4 flex-shrink-0 mt-0.5" style="color:var(--color-level-pp)"></i>
                <span>${currentLanguage === 'en' ? 'Ratios highlighted in <span class="font-bold" style="color:var(--color-level-pp)">yellow</span> are approaching the Golden Ratio ($\phi \approx 1.618$ or $0.618$).' : 'Rasio yang disorot dengan warna <span class="font-bold" style="color:var(--color-level-pp)">kuning</span> mendekati Rasio Emas ($\phi \approx 1.618$ atau $0.618$).'}</span>
            </div>`;
            levelsOutput.innerHTML = levelsHTML;
        }

        // Harmonic Analysis Visualization
        if(distanceChartContainer) {
            distanceChartContainer.innerHTML = '';
            const harmonicData = [...resistanceData.slice().reverse(), ...supportData];
            if (harmonicData.length > 0) {
                const maxDist = Math.max(...harmonicData.map(d => d.dist));
                harmonicData.forEach((distData) => {
                    const bar = document.createElement('div');
                    bar.className = 'distance-bar relative flex-1 flex flex-col justify-end items-center';
                    bar.style.height = `${(distData.dist / maxDist) * 100}%`;
                    const color = distData.type === 'R' ? 'var(--color-level-r)' : 'var(--color-level-s)';
                    bar.style.backgroundColor = color;
                    if (Math.abs(distData.ratio - 1.618) < 0.1 || Math.abs(distData.ratio - 0.618) < 0.1) {
                        bar.style.boxShadow = `0 0 15px ${color}`;
                    }
                    const nameLabel = document.createElement('span');
                    nameLabel.className = 'absolute -top-5 text-xs text-white text-center w-full font-semibold';
                    nameLabel.textContent = distData.type === 'R' ? `${distData.name}-PP` : `PP-${distData.name}`;
                    bar.appendChild(nameLabel);
                    const valueLabel = document.createElement('span');
                    valueLabel.className = 'text-xs text-black font-bold pb-1';
                    valueLabel.textContent = distData.dist.toFixed(2);
                    bar.appendChild(valueLabel);
                    distanceChartContainer.appendChild(bar);
                });
            }
        }
    }

    // --- [MODIFIED] Language Toggle Functionality ---
    let currentLanguage = localStorage.getItem('language') || 'en';
    const languageToggleButton = document.getElementById('language-toggle');

    function updateToggleState(lang) {
        if (!languageToggleButton) return;
        if (lang === 'id') {
            languageToggleButton.classList.add('lang-id');
            languageToggleButton.classList.remove('lang-en');
        } else {
            languageToggleButton.classList.add('lang-en');
            languageToggleButton.classList.remove('lang-id');
        }
    }

    function setLanguage(lang) {
        // Update all elements with data attributes
        document.querySelectorAll('[data-en], [data-id]').forEach(element => {
            let content = '';
            // For elements with nested elements (like the portfolio link), update only the text node
            if (element.classList.contains('back-to-portfolio') || element.classList.contains('text-content')) {
                const textSpan = element.querySelector('.text-content') || element;
                 if (lang === 'en' && element.dataset.en) {
                    textSpan.textContent = element.dataset.en;
                } else if (lang === 'id' && element.dataset.id) {
                    textSpan.textContent = element.dataset.id;
                }
            } else {
                 if (lang === 'en' && element.dataset.en) {
                    element.innerHTML = element.dataset.en;
                } else if (lang === 'id' && element.dataset.id) {
                    element.innerHTML = element.dataset.id;
                }
            }
        });

        // Update title specifically
        const titleElement = document.querySelector('title');
        if (titleElement) {
            titleElement.textContent = lang === 'en' ? titleElement.dataset.en : titleElement.dataset.id;
        }

        // Apply conditional font size to SVG labels
        document.querySelectorAll('.svg-label').forEach(label => {
            label.classList.toggle('svg-label-id', lang === 'id');
            label.classList.toggle('svg-label-en', lang !== 'id');
        });

        currentLanguage = lang;
        localStorage.setItem('language', lang);
        updateToggleState(lang);
        calculateAndVisualize();
        lucide.createIcons();
    }

    if (languageToggleButton) {
        languageToggleButton.addEventListener('click', () => {
            const newLang = currentLanguage === 'en' ? 'id' : 'en';
            setLanguage(newLang);
        });
    }

    // --- Setup Listeners ---
    inputIds.forEach(id => {
        const numberInput = document.getElementById(id);
        const sliderInput = document.getElementById(`${id}Slider`);
        if(numberInput && sliderInput) {
            numberInput.addEventListener('input', (e) => { sliderInput.value = e.target.value; calculateAndVisualize(); });
            sliderInput.addEventListener('input', (e) => { numberInput.value = e.target.value; calculateAndVisualize(); });
        }
    });

    const tabsContainer = document.getElementById('tabs-container');
    if(tabsContainer) {
        tabsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-button')) {
                tabsContainer.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active'); btn.classList.add('inactive');
                });
                e.target.classList.add('active'); e.target.classList.remove('inactive');
                document.querySelectorAll('#tab-content-container .tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`tab-${e.target.dataset.tab}`).classList.add('active');
            }
        });
    }

    // Active link highlighting on scroll
    const sections = document.querySelectorAll('main section');
    const navLinks = document.querySelectorAll('.main-nav-links .nav-link');
    const observer = new IntersectionObserver((entries) => {
        let lastIntersecting = null;
        entries.forEach(entry => { if (entry.isIntersecting) lastIntersecting = entry.target.id; });
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (lastIntersecting && link.getAttribute('href').substring(1) === lastIntersecting) {
                link.classList.add('active');
            }
        });
    }, { root: null, rootMargin: '-100px 0px -50% 0px', threshold: 0 });
    sections.forEach(section => observer.observe(section));

    // Initial calls
    setLanguage(currentLanguage);
    if(chartContainer) new ResizeObserver(calculateAndVisualize).observe(chartContainer);
    
    // --- Dynamic Flare Background ---
    const flareBackground = document.querySelector('.flare-background');
    if (flareBackground) {
        for (let i = 0; i < 5; i++) { // Create 5 flares
            const flare = document.createElement('div');
            flare.classList.add('flare-item');
            flareBackground.appendChild(flare);
        }
    }
});
</script>

</body>
</html>
